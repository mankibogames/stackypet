var ObjectPool=pc.createScript("objectPool");ObjectPool.attributes.add("parent",{type:"entity"}),ObjectPool.attributes.add("object",{type:"entity"}),ObjectPool.attributes.add("totalObject",{type:"number",default:10}),ObjectPool.attributes.add("spawnPosition",{type:"entity"}),ObjectPool.prototype.initialize=function(){},ObjectPool.prototype.SpawnObject=function(){this.entities=[];for(var t=0;t<this.totalObject;t++){var e=this.object.clone();e.name+="-"+t,e.enabled=!1,this.parent.addChild(e),this.entities.push({entity:e})}return this.entities},ObjectPool.prototype.ActiveObject=function(){for(var t=0;t<this.entities.length;t++)if(!this.entities[t].entity.enabled){this.entities[t].entity.enabled=!0,this.entities[t].entity.setLocalPosition(this.spawnPosition.getPosition());break}},ObjectPool.prototype.ResetPositionObject=function(){for(var t=0;t<this.entities.length;t++)this.parent.addChild(this.entities[t].entity),this.entities[t].entity.setLocalPosition(this.spawnPosition.getPosition())};var Tween=pc.createScript("tween");Tween.attributes.add("tweens",{type:"json",schema:[{name:"autoPlay",title:"Autoplay",description:"Play tween immediately.",type:"boolean",default:!1},{name:"event",title:"Trigger Event",description:"Play tween on the specified event name. This event must be fired on the global application object (e.g. this.app.fire('eventname');).",type:"string"},{name:"path",title:"Path",description:"The path from the entity to the property. e.g. 'light.color', 'camera.fov' or 'script.vehicle.speed'.",type:"string"},{name:"start",title:"Start",type:"vec4"},{name:"end",title:"End",type:"vec4"},{name:"easingFunction",title:"Easing Function",description:"The easing functions: Linear, Quadratic, Cubic, Quartic, Quintic, Sinusoidal, Exponential, Circular, Elastic, Back and Bounce.",type:"number",enum:[{Linear:0},{Quadratic:1},{Cubic:2},{Quartic:3},{Quintic:4},{Sinusoidal:5},{Exponential:6},{Circular:7},{Elastic:8},{Back:9},{Bounce:10}]},{name:"easingType",title:"Easing Type",description:"Whether to ease in, easy out or ease in and then out using the specified easing function. Note that for a Linear easing function, the easing type is ignored.",type:"number",enum:[{In:0},{Out:1},{InOut:2}]},{name:"delay",title:"Delay",description:"Time to wait in milliseconds after receiving the trigger event before executing the tween. Defaults to 0.",type:"number",default:0},{name:"duration",title:"Duration",description:"Time to execute the tween in milliseconds. Defaults to 1000.",type:"number",default:1e3},{name:"repeat",title:"Repeat",description:"The number of times the tween should be repeated after the initial playback. -1 will repeat forever. Defaults to 0.",type:"number",default:0},{name:"repeatDelay",title:"Repeat Delay",description:"Time to wait in milliseconds before executing each repeat of the tween. Defaults to 0.",type:"number",default:0},{name:"yoyo",title:"Yoyo",description:"This function only has effect if used along with repeat. When active, the behaviour of the tween will be like a yoyo, i.e. it will bounce to and from the start and end values, instead of just repeating the same sequence from the beginning. Defaults to false.",type:"boolean",default:!1},{name:"startEvent",title:"Start Event",description:"Executed right before the tween starts animating, after any delay time specified by the delay method. This will be executed only once per tween, i.e. it will not be run when the tween is repeated via repeat(). It is great for synchronising to other events or triggering actions you want to happen when a tween starts.",type:"string"},{name:"stopEvent",title:"Stop Event",description:"Executed when a tween is explicitly stopped via stop(), but not when it is completed normally.",type:"string"},{name:"updateEvent",title:"Update Event",description:"Executed each time the tween is updated, after the values have been actually updated.",type:"string"},{name:"completeEvent",title:"Complete Event",description:"Executed when a tween is finished normally (i.e. not stopped).",type:"string"},{name:"repeatEvent",title:"Repeat Event",description:"Executed whenever a tween has just finished one repetition and will begin another.",type:"string"}],array:!0}),Tween.prototype.initialize=function(){var e,t=this.app;this.tweenInstances=[],this.tweenCallbacks=[];var makeStartCallback=function(e){return function(){this.start(e)}};for(e=0;e<this.tweens.length;e++){var n=this.tweens[e];n.autoPlay&&this.start(e),n.event.length>0&&(this.tweenCallbacks[e]={event:n.event,cb:makeStartCallback(e)},t.on(this.tweenCallbacks[e].event,this.tweenCallbacks[e].cb,this))}this.on("enable",(function(){for(e=0;e<this.tweens.length;e++)this.tweenInstances[e]&&this.tweenInstances[e].isPaused()&&this.tweenInstances[e].isPaused()&&this.tweenInstances[e].resume()})),this.on("disable",(function(){for(e=0;e<this.tweens.length;e++)this.tweenInstances[e]&&this.tweenInstances[e].isPlaying()&&this.tweenInstances[e].pause()})),this.on("attr",(function(n,i,a){for(e=0;e<this.tweenCallbacks.length;e++)this.tweenCallbacks[e]&&(t.off(this.tweenCallbacks[e].event,this.tweenCallbacks[e].cb,this),this.tweenCallbacks[e]=null);for(e=0;e<this.tweens.length;e++){var s=this.tweens[e];s.event.length>0&&(this.tweenCallbacks[e]={event:s.event,cb:makeStartCallback(e)},t.on(this.tweenCallbacks[e].event,this.tweenCallbacks[e].cb,this))}}))},Tween.prototype.start=function(e){var t,n=this.app,a=this.tweens[e],s=["Linear","Quadratic","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce"];t=0===a.easingFunction?TWEEN.Easing[s[a.easingFunction]].None:TWEEN.Easing[s[a.easingFunction]][["In","Out","InOut"][a.easingType]];var o=this.tweenInstances;o[e]&&o[e].stop();var r=a.path.split("."),c=this.entity;for(i=0;i<r.length-1;i++)c=c[r[i]];var l,p,u=r[r.length-1],h=c[u],d="number"==typeof h,w=a.start,f=a.end;if(d)l={x:w.x},p={x:f.x};else if(h instanceof pc.Vec2)l=new pc.Vec2(w.x,w.y),p=new pc.Vec2(f.x,f.y);else if(h instanceof pc.Vec3)l=new pc.Vec3(w.x,w.y,w.z),p=new pc.Vec3(f.x,f.y,f.z);else if(h instanceof pc.Vec4)l=w.clone(),p=f.clone();else{if(!(h instanceof pc.Color))return void console.error("ERROR: tween - specified property must be a number, vec2, vec3, vec4 or color");l=new pc.Color(w.x,w.y,w.z,w.w),p=new pc.Color(f.x,f.y,f.z,f.w)}var updateProperty=function(e){switch(u){case"eulerAngles":c.setEulerAngles(e);break;case"localEulerAngles":c.setLocalEulerAngles(e);break;case"localPosition":c.setLocalPosition(e);break;case"localScale":c.setLocalScale(e);break;case"position":c.setPosition(e);break;default:c[u]=d?e.x:e,c instanceof pc.Material&&c.update()}};updateProperty(l),o[e]=new TWEEN.Tween(l).to(p,a.duration).easing(t).onStart((function(e){""!==a.startEvent&&n.fire(a.startEvent)})).onStop((function(t){""!==a.stopEvent&&n.fire(a.stopEvent),o[e]=null})).onUpdate((function(e){updateProperty(e),""!==a.updateEvent&&n.fire(a.updateEvent)})).onComplete((function(t){""!==a.completeEvent&&n.fire(a.completeEvent),o[e]=null})).onRepeat((function(e){""!==a.repeatEvent&&n.fire(a.repeatEvent)})).repeat(-1===a.repeat?1/0:a.repeat).repeatDelay(a.repeatDelay).yoyo(a.yoyo).delay(a.delay).start()},Tween.prototype.stop=function(e){null!=this.tweenInstances[e]&&this.tweenInstances[e].stop()},Tween.prototype.SetPosX=function(e,t){var n=this.tweens[e];n.start=new pc.Vec4(t,n.start.y,0,0),n.end=new pc.Vec4(t,n.end.y,0,0)},Tween.prototype.MoveToTarget=function(e,t){var n=this.tweens[e];n.start=this.entity.getPosition(),n.end=t,this.start(e)},Tween.prototype.SetPopup=function(e,t){var n=this.tweens[e];n.start=t,n.end=new pc.Vec2(t.x,t.y+1)},Tween.prototype.AddPosY=function(e,t){var n=this.tweens[e];n.start=this.entity.getPosition(),n.end=new pc.Vec3(this.entity.getPosition().x,this.entity.getPosition().y+t,this.entity.getPosition().z),this.start(e)},Tween.prototype.SetOnCompleteEvent=function(e,t){this.tweens[e].completeEvent=t};var app=pc.Application.getApplication();app&&app.on("update",(function(e){TWEEN.update()}));var touch,DragObject=pc.createScript("dragObject");DragObject.attributes.add("moveX",{type:"boolean"}),DragObject.attributes.add("moveY",{type:"boolean"}),DragObject.attributes.add("limitMoveX",{type:"number",default:2.2}),DragObject.attributes.add("limitMoveY",{type:"number",default:3.2}),DragObject.attributes.add("moveEvent",{type:"string"}),DragObject.attributes.add("releaseEvent",{type:"string"}),DragObject.prototype.initialize=function(){touch=this.app.touch,app.on("drag:active",(function(t){this.SetDrag(t)}),this),this.cameraEntity=this.findCamera(),this.picked=!1,this.pickedEntity=null},DragObject.prototype.SetDrag=function(t){t?touch?(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this)):(this.app.mouse.disableContextMenu(),this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this)):touch?(this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchEnd,this)):(this.app.mouse.disableContextMenu(),this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onMouseUp,this))},DragObject.prototype.findCamera=function(){var t=this.app.root.findByName("Camera");if(t)return t},DragObject.prototype.onMouseDown=function(t){if(!this.pickedEntity){var i=this.cameraEntity.camera.screenToWorld(t.x,t.y,this.cameraEntity.camera.nearClip),e=this.cameraEntity.camera.screenToWorld(t.x,t.y,this.cameraEntity.camera.farClip),o=pc.app.systems.rigidbody.raycastFirst(i,e);if(o&&o.entity&&o.entity.name==this.entity.name){this.pickedEntity=o,this.initialPosition=this.pickedEntity.entity.getPosition().clone();var s=this.cameraEntity.camera.worldToScreen(this.initialPosition);this.offset=(new pc.Vec3).sub2(s,t)}}},DragObject.prototype.onMouseMove=function(t){if(this.pickedEntity&&this.pickedEntity.entity.name==this.entity.name){var i=this.cameraEntity.getPosition().z-this.initialPosition.z,e=this.cameraEntity.camera.screenToWorld(t.x+this.offset.x,t.y+this.offset.y,i);if(e=new pc.Vec3(e.x,e.y,this.initialPosition.z),this.moveY||(e=new pc.Vec3(e.x,this.initialPosition.y,this.initialPosition.z)),this.moveX||(e=new pc.Vec3(this.initialPosition.X,e.y,this.initialPosition.z)),e.x<-this.limitMoveX||e.x>this.limitMoveX||e.y<-this.limitMoveY||e.y>this.limitMoveY)return;this.pickedEntity.entity.setPosition(e),app.fire(this.moveEvent)}},DragObject.prototype.onMouseUp=function(t){this.pickedEntity=null,app.fire(this.releaseEvent)},DragObject.prototype.onTouchStart=function(t){if(!this.pickedEntity){var i=t.touches[0],e=this.cameraEntity.camera.screenToWorld(i.x,i.y,this.cameraEntity.camera.nearClip),o=this.cameraEntity.camera.screenToWorld(i.x,i.y,this.cameraEntity.camera.farClip),s=pc.app.systems.rigidbody.raycastFirst(e,o);if(s&&s.entity&&s.entity.name==this.entity.name){this.pickedEntity=s,this.initialPosition=this.pickedEntity.entity.getPosition().clone();var n=this.cameraEntity.camera.worldToScreen(this.initialPosition);this.offset=(new pc.Vec3).sub2(n,i)}}},DragObject.prototype.onTouchMove=function(t){if(this.pickedEntity&&this.pickedEntity.entity.name==this.entity.name){var i=t.touches[0],e=this.cameraEntity.getPosition().z-this.initialPosition.z,o=this.cameraEntity.camera.screenToWorld(i.x+this.offset.x,i.y+this.offset.y,e);if(o=new pc.Vec3(o.x,o.y,this.initialPosition.z),this.moveY||(o=new pc.Vec3(o.x,this.initialPosition.y,this.initialPosition.z)),this.moveX||(o=new pc.Vec3(this.initialPosition.X,o.y,this.initialPosition.z)),o.x<-this.limitMoveX||o.x>this.limitMoveX||o.y<-this.limitMoveY||o.y>this.limitMoveY)return;this.pickedEntity.entity.setPosition(o),app.fire(this.moveEvent)}},DragObject.prototype.onTouchEnd=function(t){this.pickedEntity=null,app.fire(this.releaseEvent),t.event.preventDefault()};var SwipeInput=pc.createScript("swipeInput");SwipeInput.VERBOSE=!1,SwipeInput.SWIPE_DIRECTION={NONE:{value:0,name:"None"},UP:{value:1,name:"Up"},DOWN:{value:2,name:"Down"},LEFT:{value:3,name:"Left"},RIGHT:{value:4,name:"Right"}},SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.NONE,SwipeInput._registeredCallbacks=[],SwipeInput.attributes.add("minimumSwipeLength",{type:"number",default:1,title:"Minimum swipe length",description:"The length required for a swipe to be detected"});var isClick=!1,isSwipeActive=!1;SwipeInput.prototype.initialize=function(){this.instance=SwipeInput,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchUp,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)),this.app.mouse&&(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this)),app.on("swipe:active",(function(e){isSwipeActive=e}),this)},SwipeInput.prototype.onTouchDown=function(e){this.setInitialPos(e.changedTouches[0].x,e.changedTouches[0].y),e.event.preventDefault(),isClick=!0},SwipeInput.prototype.onTouchUp=function(e){isClick=!1,this.releaseSwipe()},SwipeInput.prototype.onTouchMove=function(e){isClick&&isSwipeActive&&(this.updateSwipeDirection(e.changedTouches[0].x,e.changedTouches[0].y),e.event.preventDefault())},SwipeInput.prototype.onMouseDown=function(e){e.button===pc.MOUSEBUTTON_LEFT&&(this.setInitialPos(e.x,e.y),isClick=!0)},SwipeInput.prototype.onMouseUp=function(e){isClick=!1,this.releaseSwipe()},SwipeInput.prototype.onMouseMove=function(e){isClick&&isSwipeActive&&this.updateSwipeDirection(e.x,e.y)},SwipeInput.eatEvent=function(){SwipeInput.down=!1,SwipeInput.justDown=!1,SwipeInput.justUp=!1},SwipeInput.prototype.setInitialPos=function(e,i){this._initialTouchPos={x:e,y:i}},SwipeInput.prototype.updateSwipeDirection=function(e,i){var t={x:e,y:i},p=vectorMagnitude(this._initialTouchPos,t);if(debugLog("---"),debugLog("Magnitude: "+p),!(p<this.minimumSwipeLength)){var n=vectorAngleDegree(this._initialTouchPos,t);debugLog("Degree: "+n),n<-135||n>135?(SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.LEFT,debugLog("Swiped Left")):n>-135&&n<-45?(SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.UP,debugLog("Swiped Up")):n>-45&&n<45?(SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.RIGHT,debugLog("Swiped Right")):n>45&&n<135&&(SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.DOWN,debugLog("Swiped Down")),SwipeInput._registeredCallbacks.forEach((function(e){e.swipeEvent===SwipeInput._swipedDirection&&e.callbackFunction(e.listener)}))}},SwipeInput.prototype.releaseSwipe=function(){SwipeInput._swipedDirection=SwipeInput.SWIPE_DIRECTION.NONE,SwipeInput._registeredCallbacks.forEach((function(e){e.swipeEvent===SwipeInput._swipedDirection&&e.callbackFunction(e.listener)}))},SwipeInput.prototype.bindCallback=function(e,i,t){var p=!1;for(var n in SwipeInput.SWIPE_DIRECTION)SwipeInput.SWIPE_DIRECTION.hasOwnProperty(n)&&e===SwipeInput.SWIPE_DIRECTION[n]&&(p=!0);p||console.error("swipeEvent in SwipeInput::bindCallback must be an instance of SwipeInput::instance::SWIPE_DIRECTION");var o={swipeEvent:e,callbackFunction:i,listener:t};return SwipeInput._registeredCallbacks.push(o),o},SwipeInput.prototype.unbindCallback=function(e){for(var i=SwipeInput._registeredCallbacks.length;i--;)SwipeInput._registeredCallbacks[i]===e&&SwipeInput._registeredCallbacks.splice(i,1)};var vectorMagnitude=function(e,i){var t=e.x-i.x,p=e.y-i.y;return Math.sqrt(t*t+p*p)},vectorAngleDegree=function(e,i){return 180*Math.atan2(i.y-e.y,i.x-e.x)/Math.PI},debugLog=function(e){SwipeInput.VERBOSE&&console.log(e)};var Game=pc.createScript("game");Game.attributes.add("playerObj",{type:"entity"}),Game.attributes.add("camera",{type:"entity"}),Game.attributes.add("moveCameraY",{type:"number",default:1}),Game.attributes.add("addMoveCameraY",{type:"number",default:1}),Game.attributes.add("mpyAddSpeed",{type:"number",default:10}),Game.attributes.add("addSpeed",{type:"number",default:.1}),Game.attributes.add("limitCollision",{type:"entity"}),Game.attributes.add("startlimitCollY",{type:"number",default:-9}),Game.attributes.add("movelimitCollY",{type:"number",default:1}),Game.attributes.add("diffCamera",{type:"number",default:11.5}),Game.attributes.add("comboText",{type:"entity"}),Game.attributes.add("useTimer",{type:"boolean"}),Game.attributes.add("maxLife",{type:"number",default:3}),Game.attributes.add("minLife",{type:"number",default:1}),Game.attributes.add("plusScore",{type:"number",default:10}),Game.attributes.add("minScore",{type:"number",default:5}),Game.attributes.add("bonusScore",{type:"number",default:15});var scoreText,lifeText,tutorialText,resultText,playerScript,resultScoreText,resultHighScoreText,mpyAddSpeed=0,score=0,life=0,highScore=0,combo=0,totalTower=0,diffCamera=0,moveCameraY=0,isLose=!1;Game.prototype.initialize=function(){Game.instance?console.error("Instance already created"):(Game.instance=this,this.on("destroy",(function(){Game.instance=null})));var e=this.app;e.on("game:back",(function(){window.location.replace("../../finish/index.html?id="+this.kumanName)}),this),e.on("game:retry",(function(){this.Initial(),e.fire("game:start")}),this),e.on("game:score",(function(e,t){e>0&&this.SetScore(e,t)}),this),e.on("game:life",(function(e,t){e>0&&this.SetLife(e,t)}),this),e.on("game:start",(function(){this.StartGame()}),this),e.on("game:checkcamera",(function(){console.log(this.camera.getPosition().y+"-"+this.diffCamera),this.camera.getPosition().y>this.diffCamera&&(this.axisY=Math.abs(this.camera.getPosition().y-this.diffCamera))}),this),e.on("TimerOut",(function(){this.CheckResult(!0)}),this),this.InitialData(),this.Initial()},Game.prototype.SetScore=function(e,t){this.result||(t?(score+=e,SoundManager.instance.PlaySFX("Point")):(score-=e)<0&&(score=0),scoreText.element.text=""+score)},Game.prototype.SetLife=function(e,t){t?life+=e:(life-=e)<=0&&(life=0,this.CheckResult(!0)),lifeText.element.text=""+life},Game.prototype.InitialData=function(){tutorialText=this.app.root.findByName("TutorialText"),scoreText=this.app.root.findByName("ScoreText"),resultText=this.app.root.findByName("ResultText"),lifeText=this.app.root.findByName("LifeText"),timerUI=this.app.root.findByName("Timer"),lifeUI=this.app.root.findByName("Life"),resultScoreText=this.app.root.findByName("ResultScoreText"),resultHighScoreText=this.app.root.findByName("ResultHighScoreText"),playerScript=this.playerObj.script,timerUI.enabled=!1,lifeUI.enabled=!1},Game.prototype.Initial=function(){this.app.root.findByName("GameScreen").enabled=!0,this.app.root.findByName("Game").enabled=!0,this.app.root.findByName("ResultScreen").enabled=!1,this.app.root.findByName("WinScreen").enabled=!1,this.app.root.findByName("LoseScreen").enabled=!1,tutorialText.enabled=!0,this.result=!1,null===(highScore=DataController.instance.LoadData("HighScore"))&&(highScore=0),score=life=0,totalTower=0,mpyAddSpeed=this.mpyAddSpeed,moveCameraY=this.moveCameraY,this.SetScore(score,!1),this.SetCombo(0),this.maxLife>0&&(this.SetLife(this.maxLife,!0),lifeUI.enabled=!0),this.limitCollision.setPosition(new pc.Vec3(0,this.startlimitCollY,0)),this.limitCollision.enabled=!1,this.isMoveCamera=!1},Game.prototype.StartGame=function(){this.camera.script.tween.stop(0),this.camera.setPosition(new pc.Vec3(0,0,30)),setTimeout(this.ActiveInput,100)},Game.prototype.ActiveInput=function(){playerScript.player.SetInput(!0)},Game.prototype.MoveCamera=function(){this.camera.script.tween.AddPosY(0,moveCameraY),this.isMoveCamera||(moveCameraY+=this.addMoveCameraY),this.isMoveCamera=!0,totalTower++,this.limitCollision.setPosition(new pc.Vec3(0,this.limitCollision.getPosition().y+this.movelimitCollY,0)),setTimeout((function(){Player.instance.SetInput(!0)}),1e3)},Game.prototype.SetCombo=function(e){e>0?(combo++,this.comboText.enabled=!0,this.comboText.element.text="PERFECT\n"+combo+"X",this.comboText.script.popupText.PlayTween(0)):(combo=0,this.comboText.enabled=!1)},Game.prototype.CheckAddSpeed=function(){score>=mpyAddSpeed&&(ClawController.instance.AddSpeed(this.addSpeed),mpyAddSpeed+=this.mpyAddSpeed)},Game.prototype.CheckResult=function(e=!1){this.result||(this.result=!0,isLose=e,e?this.app.root.findByName("LoseScreen").enabled=!0:this.app.root.findByName("WinScreen").enabled=!0,window.clearInterval(),window.clearTimeout(),this.AppearResult())},Game.prototype.AppearResult=function(){app.fire("game:stop"),SoundManager.instance.PlaySFX("Reward"),this.posZ=40,totalTower>5&&(this.posZ=this.posZ*totalTower/5),totalTower--,this.posY=this.camera.getPosition().y-totalTower*this.moveCameraY,totalTower>4&&(this.posY=this.moveCameraY+totalTower*this.moveCameraY/4),this.camera.script.tween.MoveToTarget(0,new pc.Vec3(0,this.posY,this.posZ)),this.app.root.findByName("Game").enabled=!1,highScore<score&&(highScore=score,DataController.instance.SaveData("HighScore",highScore.toString())),isLose?DataController.instance.SaveData("Lose","Lose"):DataController.instance.SaveData("Win","Win:"+this.gameName),resultHighScoreText.element.text=""+highScore,resultScoreText.element.text=""+score,setTimeout((function(){this.app.root.findByName("ResultScreen").enabled=!0}),1300)};var Menu=pc.createScript("menu");Menu.attributes.add("gameScenes",{type:"entity",array:!0}),Menu.prototype.initialize=function(){this.app.root.findByName("MenuScreen").enabled=!0,this.app.root.findByName("GameScreen").enabled=!1,this.app.root.findByName("Game").enabled=!1,this.app.root.findByName("ResultScreen").enabled=!1,this.app.root.findByName("WinScreen").enabled=!1,this.app.root.findByName("LoseScreen").enabled=!1;for(var e=0;e<this.gameScenes.length;e++)this.gameScenes[e].enabled=!1;var t=this.app.root.findByName("HighScoreText"),n=0;storageAvailable("localStorage")&&(n=localStorage.getItem("HighScore")),t.element.text="Highscore\n"+n,app.on("menu:play",(function(){this.Play()}),this),app.on("menu:exit",(function(){this.Exit()}),this),this.app.touch?this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this):(this.app.mouse.disableContextMenu(),this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this))},Menu.prototype.onMouseDown=function(e){this.Play()},Menu.prototype.onTouchStart=function(e){this.Play()},Menu.prototype.Play=function(){if(this.app.root.findByName("MenuScreen").enabled){this.app.root.findByName("MenuScreen").enabled=!1,this.app.root.findByName("GameScreen").enabled=!0,this.app.root.findByName("Game").enabled=!0;for(var e=0;e<this.gameScenes.length;e++)this.gameScenes[e].enabled=!0;app.fire("game:start")}},Menu.prototype.Exit=function(){SoundManager.instance.PlaySFX("Click")};var Blink=pc.createScript("blink");Blink.attributes.add("delayBlink",{type:"number",default:.5}),Blink.attributes.add("object",{type:"entity"}),Blink.prototype.initialize=function(){this.activeBlink=!1,this.count=0},Blink.prototype.update=function(t){this.activeBlink&&(0===Math.floor(this.count)&&this.object.enabled&&(this.object.enabled=!1),this.count>2*this.delayBlink&&(this.object.enabled=!1,this.count=0),this.count+=t,this.count>this.delayBlink&&(this.object.enabled=!0))},Blink.prototype.StartBlink=function(){this.activeBlink=!0},Blink.prototype.StopBlink=function(){this.activeBlink=!1,this.object.enabled=!0};var Player=pc.createScript("player");Player.attributes.add("maxHeight",{type:"number",default:5}),Player.attributes.add("startSpawn",{type:"vec3"}),Player.attributes.add("distancePosY",{type:"number",default:8}),Player.attributes.add("petPrefab",{type:"entity",array:!0}),Player.attributes.add("petParent",{type:"entity"}),Player.attributes.add("clawParent",{type:"entity"}),Player.attributes.add("player",{type:"entity"}),Player.attributes.add("objectPool",{type:"entity"}),Player.attributes.add("spawnPos",{type:"entity"}),Player.attributes.add("shieldEffect",{type:"entity"}),Player.attributes.add("getText",{type:"entity"}),Player.attributes.add("colorTextTrue",{type:"rgba"}),Player.attributes.add("colorTextWrong",{type:"rgba"});var currPet,randPet,clawParent,click=0,activeInput=!1,petList=[];Player.prototype.initialize=function(){Player.instance?console.error("Instance already created"):(Player.instance=this,this.on("destroy",(function(){Player.instance=null}))),this.app.touch&&this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchDown,this),this.app.mouse&&this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),clawParent=this.clawParent,petList=this.petPrefab,app.on("game:start",(function(){this.SpawnPet()}),this),app.on("player:respawn",(function(){this.CheckSpawn()}),this),app.on("game:stop",(function(){activeInput=!1,currPet=null}),this),app.on("player:addclick",(function(){click++}),this)},Player.prototype.onTouchDown=function(t){},Player.prototype.onMouseDown=function(t){t.button===pc.MOUSEBUTTON_LEFT&&activeInput&&this.DropPet()},Player.prototype.DropPet=function(){if(currPet){var t=currPet.getPosition();Player.instance.petParent.addChild(currPet),Player.instance.MoveObject(currPet,t),currPet.collision.enabled=!0,currPet.rigidbody.enabled=!0,currPet=null,ClawController.instance.OpenClaw(),Player.instance.SetInput(!1)}setTimeout((function(){Player.instance.SpawnPet()}),300)},Player.prototype.SpawnPet=function(){randPet=Math.floor(pc.math.random(0,petList.length)),currPet=petList[randPet].clone(),clawParent.addChild(currPet),currPet&&(Player.instance.MoveObject(currPet,Player.instance.spawnPos.getPosition()),currPet.enabled=!0,ClawController.instance.CloseClaw())},Player.prototype.ResetPet=function(){for(var t=0;t<spawnObject.length;t++)spawnObject[t].entity.enabled=!1;this.objectPool.script.objectPool.ResetPositionObject()},Player.prototype.DecreaseSpawn=function(){click=0;for(var t=0;t<spawnObject.length;t++)spawnObject[t].entity.enabled&&!spawnObject[t].entity.script.cloneCollision.CheckHit()&&click++},Player.prototype.SetInput=function(t){activeInput=t},Player.prototype.MoveObject=function(t,e){t.rigidbody.linearVelocity=pc.Vec3.ZERO,t.rigidbody.angularVelocity=pc.Vec3.ZERO,t.collision.enabled=!1,t.rigidbody.enabled=!1,t.setPosition(e)};function storageAvailable(t){try{var a=window[t],e="__storage_test__";return a.setItem(e,e),a.removeItem(e),!0}catch(t){return!1}}var DataController=pc.createScript("dataController");DataController.prototype.initialize=function(){DataController.instance?console.error("Instance already created"):(DataController.instance=this,this.on("destroy",(function(){DataController.instance=null})))},DataController.prototype.SaveData=function(t,a){storageAvailable("localStorage")&&localStorage.setItem(t,a)},DataController.prototype.LoadData=function(t){var a;return storageAvailable("localStorage")&&(a=localStorage.getItem(t)),a};!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TWEEN={})}(this,(function(t){"use strict";var e,n={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-n.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*n.Bounce.In(2*t):.5*n.Bounce.Out(2*t-1)+.5}}},i="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},r=function(){function Group(){this._tweens={},this._tweensAddedDuringUpdate={}}return Group.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},Group.prototype.removeAll=function(){this._tweens={}},Group.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},Group.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},Group.prototype.update=function(t,e){void 0===t&&(t=i()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],o=!e;s&&!1===s.update(t,o)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},Group}(),s={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=s.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=s.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-e,i-a)*r(e,a)*t[a]*o(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=s.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=s.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(e=[1],function(t){var n=1;if(e[t])return e[t];for(var i=t;i>1;i--)n*=i;return e[t]=n,n}),CatmullRom:function(t,e,n,i,r){var s=.5*(n-t),o=.5*(i-e),a=r*r;return(2*e-2*n+s+o)*(r*a)+(-3*e+3*n-2*s-o)*a+s*r+e}}},o=function(){function Sequence(){}return Sequence.nextId=function(){return Sequence._nextId++},Sequence._nextId=0,Sequence}(),a=new r,u=function(){function Tween(t,e){void 0===e&&(e=a),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=n.Linear.None,this._interpolationFunction=s.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=o.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return Tween.prototype.getId=function(){return this._id},Tween.prototype.isPlaying=function(){return this._isPlaying},Tween.prototype.isPaused=function(){return this._isPaused},Tween.prototype.to=function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},Tween.prototype.duration=function(t){return this._duration=t,this},Tween.prototype.start=function(t){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var e in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(e),this._valuesStart[e]=this._valuesStartRepeat[e];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==t?"string"==typeof t?i()+parseFloat(t):t:i(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},Tween.prototype._setupProperties=function(t,e,n,i){for(var r in n){var s=t[r],o=Array.isArray(s),a=o?"array":typeof s,u=!o&&Array.isArray(n[r]);if("undefined"!==a&&"function"!==a){if(u){var h=n[r];if(0===h.length)continue;h=h.map(this._handleRelativeValue.bind(this,s)),n[r]=[s].concat(h)}if("object"!==a&&!o||!s||u)void 0===e[r]&&(e[r]=s),o||(e[r]*=1),i[r]=u?n[r].slice().reverse():e[r]||0;else{for(var p in e[r]=o?[]:{},s)e[r][p]=s[p];i[r]=o?[]:{},this._setupProperties(s,e[r],n[r],i[r])}}}},Tween.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},Tween.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},Tween.prototype.pause=function(t){return void 0===t&&(t=i()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},Tween.prototype.resume=function(t){return void 0===t&&(t=i()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},Tween.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},Tween.prototype.group=function(t){return this._group=t,this},Tween.prototype.delay=function(t){return this._delayTime=t,this},Tween.prototype.repeat=function(t){return this._initialRepeat=t,this._repeat=t,this},Tween.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},Tween.prototype.yoyo=function(t){return this._yoyo=t,this},Tween.prototype.easing=function(t){return this._easingFunction=t,this},Tween.prototype.interpolation=function(t){return this._interpolationFunction=t,this},Tween.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},Tween.prototype.onStart=function(t){return this._onStartCallback=t,this},Tween.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},Tween.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},Tween.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},Tween.prototype.onStop=function(t){return this._onStopCallback=t,this},Tween.prototype.update=function(t,e){if(void 0===t&&(t=i()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r,s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>s)return!1;e&&this.start(t)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,u=this._chainedTweens.length;a<u;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},Tween.prototype._updateProperties=function(t,e,n,i){for(var r in n)if(void 0!==e[r]){var s=e[r]||0,o=n[r],a=Array.isArray(t[r]),u=Array.isArray(o);!a&&u?t[r]=this._interpolationFunction(o,i):"object"==typeof o&&o?this._updateProperties(t[r],s,o,i):"number"==typeof(o=this._handleRelativeValue(s,o))&&(t[r]=s+(o-s)*i)}},Tween.prototype._handleRelativeValue=function(t,e){return"string"!=typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},Tween.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"==typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},Tween}(),h="18.6.4",p=o.nextId,_=a,l=_.getAll.bind(_),c=_.removeAll.bind(_),d=_.add.bind(_),f=_.remove.bind(_),y=_.update.bind(_),v={Easing:n,Group:r,Interpolation:s,now:i,Sequence:o,nextId:p,Tween:u,VERSION:h,getAll:l,removeAll:c,add:d,remove:f,update:y};t.Easing=n,t.Group=r,t.Interpolation=s,t.Sequence=o,t.Tween=u,t.VERSION=h,t.add=d,t.default=v,t.getAll=l,t.nextId=p,t.now=i,t.remove=f,t.removeAll=c,t.update=y,Object.defineProperty(t,"__esModule",{value:!0})}));var Application=pc.createScript("application");Application.attributes.add("TimerEffect",{type:"asset",assetType:"audio"}),Application.prototype.initialize=function(){this.convolver=this.app.systems.sound.context.createConvolver(),app.on("effect",this.setEffect,this)},Application.prototype.setEffect=function(t){if("none"===t)this.entity.sound.slot("Timer").clearExternalNodes();else{var e=this[t+"Effect"];this.convolver.buffer=e.resource.buffer,this.entity.sound.slot("Timer").setExternalNodes(this.convolver),console.log("jk")}};var SoundManager=pc.createScript("soundManager");SoundManager.attributes.add("BGM",{type:"entity"}),SoundManager.attributes.add("SFX",{type:"entity"}),SoundManager.attributes.add("TimerEffect",{type:"asset",assetType:"audio"}),SoundManager.prototype.initialize=function(){SoundManager.instance?console.error("Instance already created"):(SoundManager.instance=this,this.on("destroy",(function(){SoundManager.instance=null})))},SoundManager.prototype.CheckBGM=function(n){return this.BGM.sound.slot(n).isPlaying},SoundManager.prototype.PlayBGM=function(n){this.BGM.sound.play(n)},SoundManager.prototype.PlaySFX=function(n){this.SFX.sound.play(n)},SoundManager.prototype.StopBGM=function(n){this.BGM.sound.stop(n)},SoundManager.prototype.StopSFX=function(n){this.SFX.sound.stop(n)};var Button=pc.createScript("button");Button.attributes.add("event",{type:"string"}),Button.prototype.initialize=function(){this.app;this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("touchstart",this.onPress,this)},Button.prototype.onPress=function(t){this.app.fire(this.event),SoundManager.instance.PlaySFX("Click")};var Timer=pc.createScript("timer");Timer.attributes.add("timer",{type:"number",default:30}),Timer.attributes.add("timerText",{type:"entity"});var isTimerStarted=!1,currentTimer=0;Timer.prototype.initialize=function(){Timer.instance?console.error("Instance already created"):(Timer.instance=this,this.on("destroy",(function(){Timer.instance=null}))),this.app.on("TimerOut",(function(){isTimerStarted=!1,SoundManager.instance.StopBGM("Timer")}),this),this.app.on("SetTimer",(function(t,e){this.SetTimer(t,e)}),this)},Timer.prototype.update=function(t){isTimerStarted&&(this.SetTimer(t,!1),currentTimer<0&&this.app.fire("TimerOut"))},Timer.prototype.ResetTimer=function(){currentTimer=0,isTimerStarted=!1,this.timerText.element.color=new pc.Color(0,255,0),this.entity.script.blink.StopBlink(),this.timerText.enabled=!1},Timer.prototype.StartTimer=function(){isTimerStarted=!0,this.timerText.enabled=!0,this.SetTimer(this.timer,!0),this.entity.script.blink.StopBlink(),SoundManager.instance.PlayBGM("Timer")},Timer.prototype.GetCurrentTimer=function(){return currentTimer},Timer.prototype.SetTimer=function(t,e){e?currentTimer+=t:currentTimer-=t,this.SetTimerFormat(Math.floor(currentTimer)),this.minutes=this.minutes<10?"0"+this.minutes:this.minutes,this.seconds=this.seconds<10?"0"+this.seconds:this.seconds;var i=Math.floor(currentTimer)/this.timer;i<.5&&i>.1?this.timerText.element.color=new pc.Color(223,255,0):i<=.1&&(this.timerText.element.color=new pc.Color(255,0,0),this.entity.script.blink.StartBlink()),this.timerText.element.text=this.minutes+":"+this.seconds},Timer.prototype.SetTimerFormat=function(t){this.seconds=Math.floor(t%60),this.minutes=Math.floor(t/60%60),this.hours=Math.floor(t/36e5%24),this.days=Math.floor(t/864e5)};var ScrollBackground=pc.createScript("scrollBackground");ScrollBackground.attributes.add("endX",{type:"number",default:-1}),ScrollBackground.attributes.add("speed",{type:"number",default:-1}),ScrollBackground.attributes.add("spawnPos",{type:"entity"}),ScrollBackground.attributes.add("isRight",{type:"boolean"});var initPosX=0;ScrollBackground.prototype.initialize=function(){initPosX=this.entity.getPosition().x,this.spawnPos&&(initPosX=this.spawnPos.getPosition().x)},ScrollBackground.prototype.update=function(t){var i=this.entity.getPosition();i.x<this.endX&&!this.isRight||i.x>this.endX&&this.isRight?this.entity.setPosition(new pc.Vec3(initPosX,i.y,0)):this.entity.translate(this.speed*t/(1/60),0,0)};var Pet=pc.createScript("pet");Pet.attributes.add("offsetX",{type:"number",default:2});var hit=!1;Pet.prototype.initialize=function(){this.entity.collision.on("collisionstart",this.onCollisionStart,this),app.on("game:start",(function(){hit=!1,this.entity.destroy()}),this)},Pet.prototype.onCollisionStart=function(t){t.other.tags.has("Limit")?Game.instance.CheckResult(!1):this.hit||(this.hit=!0,this.getScore=Game.instance.plusScore,t.other.tags.has("Pet")?this.CheckOffset(t.other.getLocalPosition())||(this.ResetPhysics(),this.CheckPerfect(t.other.getLocalPosition())?(this.getScore*=2,Game.instance.SetCombo(1)):Game.instance.SetCombo(0)):this.ResetPhysics(),Game.instance.MoveCamera(),Game.instance.CheckAddSpeed(),Game.instance.SetScore(this.getScore,!0),Game.instance.limitCollision.enabled=!0)},Pet.prototype.CheckPerfect=function(t){this.isPerfect=!1;var e=this.entity.getLocalPosition();return Math.abs(e.x-t.x)<=.2&&(this.isPerfect=!0),this.isPerfect},Pet.prototype.CheckOffset=function(t){this.isOffset=!1;var e=this.entity.getLocalPosition();return Math.abs(e.x-t.x)>=this.offsetX&&(this.isOffset=!0),this.isOffset},Pet.prototype.CheckHit=function(){return this.hit},Pet.prototype.ResetPhysics=function(){this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.entity.rigidbody.type=pc.RIGIDBODY_TYPE_STATIC};var ClawController=pc.createScript("clawController");ClawController.attributes.add("speed",{type:"number",default:1}),ClawController.attributes.add("limitPosX",{type:"number",default:3}),ClawController.attributes.add("limitAngle",{type:"number",default:45}),ClawController.attributes.add("startPos",{type:"vec3"}),ClawController.attributes.add("clawImage",{type:"entity"}),ClawController.attributes.add("openClawSprite",{type:"asset",assetType:"sprite"}),ClawController.attributes.add("closeClawSprite",{type:"asset",assetType:"sprite"});var currSpeed=0,tempSpeed=0;ClawController.prototype.initialize=function(){ClawController.instance?console.error("Instance already created"):(ClawController.instance=this,this.on("destroy",(function(){ClawController.instance=null}))),this.app.on("game:start",(function(){this.entity.setPosition(this.startPos),currSpeed=tempSpeed=this.speed}),this)},ClawController.prototype.update=function(t){this.entity.getRotation().z>this.limitAngle&&(tempSpeed=-1*currSpeed),this.entity.getRotation().z<-this.limitAngle&&(tempSpeed=currSpeed),this.entity.rotate(0,0,tempSpeed*t/(1/60))},ClawController.prototype.AddSpeed=function(t){currSpeed+=t},ClawController.prototype.OpenClaw=function(){this.clawImage.sprite.spriteAsset=this.openClawSprite},ClawController.prototype.CloseClaw=function(){this.clawImage.sprite.spriteAsset=this.closeClawSprite};var PopupText=pc.createScript("popupText");PopupText.attributes.add("indexTweenInactive",{type:"number",default:1}),PopupText.attributes.add("indexTweenResetScale",{type:"number",default:0}),PopupText.attributes.add("limitPosX",{type:"number",default:2.3}),PopupText.prototype.initialize=function(){app.on(this.entity.name+":inactive",(function(){this.entity.enabled=!1}),this),this.entity.script.tween.SetOnCompleteEvent(this.indexTweenInactive,this.entity.name+":inactive"),this.indexTweenResetScale<1||(app.on(this.entity.name+":resetScale",(function(){this.entity.script.tween.start(this.indexTweenResetScale)}),this),this.entity.script.tween.SetOnCompleteEvent(0,this.entity.name+":resetScale"))},PopupText.prototype.SetPosX=function(t){t<-this.limitPosX?t=-this.limitPosX:t>this.limitPosX&&(t=this.limitPosX),this.entity.script.tween.SetPosX(0,t),this.entity.script.tween.start(0),this.entity.script.tween.start(1)},PopupText.prototype.SetPopup=function(t){this.entity.setPosition(t.x,t.y,0),this.entity.script.tween.SetPopup(0,t),this.entity.script.tween.start(0),this.entity.script.tween.start(1)},PopupText.prototype.PlayTween=function(t){for(var e=0;e<this.entity.script.tween.tweens.length;e++)this.entity.script.tween.stop(e);this.entity.script.tween.start(t)};var TriggerEntity=pc.createScript("triggerEntity");TriggerEntity.prototype.initialize=function(){this.entity.collision.on("triggerenter",(function(t){t.tags.has("Pet")&&(Game.instance.CheckResult(!1),t.enabled=!1)}))},TriggerEntity.prototype.update=function(t){};